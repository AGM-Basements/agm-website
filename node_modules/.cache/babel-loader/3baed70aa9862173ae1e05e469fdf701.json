{"ast":null,"code":"import React, { Component, Children, cloneElement } from 'react';\nimport { findDOMNode, createPortal } from 'react-dom';\nimport glam from 'glam';\nimport rafScheduler from 'raf-schd';\nimport { ViewPager, Frame, Track, View as View$1 } from 'react-view-pager';\nimport { TransitionGroup, Transition } from 'react-transition-group';\nimport Fullscreen from 'react-full-screen';\nimport ScrollLock from 'react-scrolllock';\nimport focusStore from 'a11y-focus-store';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nvar Base = function Base(_ref) {\n  var css = _ref.css,\n      innerRef = _ref.innerRef,\n      Tag = _ref.tag,\n      props = _objectWithoutProperties(_ref, [\"css\", \"innerRef\", \"tag\"]);\n\n  return glam(Tag, _extends({\n    ref: innerRef,\n    css: _objectSpread2({\n      boxSizing: 'border-box'\n    }, css)\n  }, props));\n};\n\nvar Button = function Button(props) {\n  return glam(Base, _extends({\n    tag: \"button\"\n  }, props));\n};\n\nvar Div = function Div(props) {\n  return glam(Base, _extends({\n    tag: \"div\"\n  }, props));\n};\n\nvar Img = function Img(props) {\n  return glam(Base, _extends({\n    tag: \"img\"\n  }, props));\n};\n\nvar Nav = function Nav(props) {\n  return glam(Base, _extends({\n    tag: \"nav\"\n  }, props));\n};\n\nvar Span = function Span(props) {\n  return glam(Base, _extends({\n    tag: \"span\"\n  }, props));\n}; // ==============================\n// Class Name Prefixer\n// ==============================\n\n\nvar CLASS_PREFIX = 'react-images';\n/**\r\n String representation of component state for styling with class names.\r\n\r\n Expects an array of strings OR a string/object pair:\r\n - className(['comp', 'comp-arg', 'comp-arg-2'])\r\n   @returns 'react-images__comp react-images__comp-arg react-images__comp-arg-2'\r\n - className('comp', { some: true, state: false })\r\n   @returns 'react-images__comp react-images__comp--some'\r\n*/\n\nfunction className(name, state) {\n  var arr = Array.isArray(name) ? name : [name]; // loop through state object, remove falsey values and combine with name\n\n  if (state && typeof name === 'string') {\n    for (var _key in state) {\n      if (state.hasOwnProperty(_key) && state[_key]) {\n        arr.push(\"\".concat(name, \"--\").concat(_key));\n      }\n    }\n  } // prefix everything and return a string\n\n\n  return arr.map(function (cn) {\n    return \"\".concat(CLASS_PREFIX, \"__\").concat(cn);\n  }).join(' ');\n} // ==============================\n// Touch Capability Detector\n// ==============================\n\n\nfunction isTouch() {\n  try {\n    document.createEvent('TouchEvent');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar containerCSS = function containerCSS(_ref) {\n  var isFullscreen = _ref.isFullscreen;\n  return {\n    backgroundColor: isFullscreen ? 'black' : null,\n    display: 'flex ',\n    flexDirection: 'column',\n    height: '100%'\n  };\n};\n\nvar Container = function Container(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal,\n      innerProps = props.innerProps;\n  return glam(Div, _extends({\n    css: getStyles('container', props),\n    className: className('container', {\n      isFullscreen: isFullscreen,\n      isModal: isModal\n    })\n  }, innerProps), children);\n};\n\nvar smallDevice = '@media (max-width: 769px)';\n\nvar footerCSS = function footerCSS(_ref) {\n  var isModal = _ref.isModal,\n      interactionIsIdle = _ref.interactionIsIdle;\n  return _defineProperty({\n    alignItems: 'top',\n    bottom: isModal ? 0 : null,\n    color: isModal ? 'rgba(255, 255, 255, 0.9)' : '#666',\n    display: 'flex ',\n    flex: '0 0 auto',\n    fontSize: 13,\n    justifyContent: 'space-between',\n    left: isModal ? 0 : null,\n    opacity: interactionIsIdle && isModal ? 0 : 1,\n    padding: isModal ? '30px 20px 20px' : '10px 0',\n    position: isModal ? 'absolute' : null,\n    right: isModal ? 0 : null,\n    transform: isModal ? \"translateY(\".concat(interactionIsIdle ? 10 : 0, \"px)\") : null,\n    transition: 'opacity 300ms, transform 300ms',\n    zIndex: isModal ? 1 : null\n  }, smallDevice, {\n    padding: isModal ? '20px 15px 15px' : '5px 0'\n  });\n};\n\nvar Footer = function Footer(props) {\n  var components = props.components,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal;\n  var style = isModal ? {\n    background: 'linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.33))'\n  } : null;\n  var state = {\n    isFullscreen: isFullscreen,\n    isModal: isModal\n  };\n  var cn = {\n    container: className('footer', state),\n    caption: className('footer__caption', state),\n    count: className('footer__count', state)\n  };\n  var css = {\n    container: getStyles('footer', props),\n    caption: getStyles('footerCaption', props),\n    count: getStyles('footerCount', props)\n  };\n  var Caption = components.Caption,\n      Count = components.Count;\n  return glam(Div, _extends({\n    css: css.container,\n    className: cn.container // TODO glam prefixer fails on gradients\n    // https://github.com/threepointone/glam/issues/35\n    ,\n    style: style\n  }, innerProps), glam(Caption, props), glam(Count, props));\n}; // ==============================\n// Inner Elements\n// ==============================\n\n\nvar footerCaptionCSS = function footerCaptionCSS() {\n  return {};\n};\n\nvar FooterCaption = function FooterCaption(props) {\n  var currentView = props.currentView,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal;\n  var caption = currentView.caption;\n  var state = {\n    isFullscreen: isFullscreen,\n    isModal: isModal\n  };\n  return glam(Span, {\n    css: getStyles('footerCaption', props),\n    className: className('footer__caption', state)\n  }, caption);\n};\n\nvar footerCountCSS = function footerCountCSS() {\n  return {\n    flexShrink: 0,\n    marginLeft: '1em'\n  };\n};\n\nvar FooterCount = function FooterCount(props) {\n  var currentIndex = props.currentIndex,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal,\n      views = props.views;\n  var state = {\n    isFullscreen: isFullscreen,\n    isModal: isModal\n  };\n  var activeView = currentIndex + 1;\n  var totalViews = views.length;\n  if (!activeView || !totalViews) return null;\n  return glam(Span, {\n    css: getStyles('footerCount', props),\n    className: className('footer__count', state)\n  }, activeView, \" of \", totalViews);\n};\n\nvar Svg = function Svg(_ref) {\n  var size = _ref.size,\n      props = _objectWithoutProperties(_ref, [\"size\"]);\n\n  return glam(\"svg\", _extends({\n    role: \"presentation\",\n    viewBox: \"0 0 24 24\",\n    css: {\n      display: 'inline-block',\n      fill: 'currentColor',\n      height: size,\n      stroke: 'currentColor',\n      strokeWidth: 0,\n      width: size\n    }\n  }, props));\n};\n\nvar ChevronLeft = function ChevronLeft(_ref2) {\n  var _ref2$size = _ref2.size,\n      size = _ref2$size === void 0 ? 32 : _ref2$size,\n      props = _objectWithoutProperties(_ref2, [\"size\"]);\n\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam(\"path\", {\n    d: \"M15.422 16.078l-1.406 1.406-6-6 6-6 1.406 1.406-4.594 4.594z\"\n  }));\n};\n\nvar ChevronRight = function ChevronRight(_ref3) {\n  var _ref3$size = _ref3.size,\n      size = _ref3$size === void 0 ? 32 : _ref3$size,\n      props = _objectWithoutProperties(_ref3, [\"size\"]);\n\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam(\"path\", {\n    d: \"M9.984 6l6 6-6 6-1.406-1.406 4.594-4.594-4.594-4.594z\"\n  }));\n};\n\nvar Close = function Close(_ref4) {\n  var _ref4$size = _ref4.size,\n      size = _ref4$size === void 0 ? 32 : _ref4$size,\n      props = _objectWithoutProperties(_ref4, [\"size\"]);\n\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam(\"path\", {\n    d: \"M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z\"\n  }));\n};\n\nvar FullscreenEnter = function FullscreenEnter(_ref5) {\n  var _ref5$size = _ref5.size,\n      size = _ref5$size === void 0 ? 32 : _ref5$size,\n      props = _objectWithoutProperties(_ref5, [\"size\"]);\n\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam(\"path\", {\n    d: \"M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z\"\n  }));\n};\n\nvar FullscreenExit = function FullscreenExit(_ref6) {\n  var _ref6$size = _ref6.size,\n      size = _ref6$size === void 0 ? 32 : _ref6$size,\n      props = _objectWithoutProperties(_ref6, [\"size\"]);\n\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam(\"path\", {\n    d: \"M15.984 8.016h3v1.969h-4.969v-4.969h1.969v3zM14.016 18.984v-4.969h4.969v1.969h-3v3h-1.969zM8.016 8.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 15.984v-1.969h4.969v4.969h-1.969v-3h-3z\"\n  }));\n};\n\nvar headerCSS = function headerCSS(_ref) {\n  var interactionIsIdle = _ref.interactionIsIdle;\n  return {\n    alignItems: 'center',\n    display: 'flex ',\n    flex: '0 0 auto',\n    justifyContent: 'space-between',\n    opacity: interactionIsIdle ? 0 : 1,\n    padding: 10,\n    paddingBottom: 20,\n    position: 'absolute',\n    transform: \"translateY(\".concat(interactionIsIdle ? -10 : 0, \"px)\"),\n    transition: 'opacity 300ms, transform 300ms',\n    top: 0,\n    left: 0,\n    right: 0,\n    zIndex: 1\n  };\n};\n\nvar Header = function Header(props) {\n  var components = props.components,\n      getStyles = props.getStyles,\n      getCloseLabel = props.getCloseLabel,\n      getFullscreenLabel = props.getFullscreenLabel,\n      innerProps = props.innerProps,\n      isModal = props.isModal,\n      modalProps = props.modalProps;\n  if (!isModal) return null;\n  var allowFullscreen = modalProps.allowFullscreen,\n      isFullscreen = modalProps.isFullscreen,\n      onClose = modalProps.onClose,\n      toggleFullscreen = modalProps.toggleFullscreen;\n  var FsIcon = isFullscreen ? FullscreenExit : FullscreenEnter;\n  var CloseButton = components.CloseButton,\n      FullscreenButton = components.FullscreenButton;\n  var state = {\n    isFullscreen: isFullscreen,\n    isModal: isModal\n  };\n  return glam(Div, _extends({\n    css: getStyles('header', props),\n    className: className('header', state) // TODO glam prefixer fails on gradients\n    // https://github.com/threepointone/glam/issues/35\n    ,\n    style: {\n      background: 'linear-gradient(rgba(0,0,0,0.33), rgba(0,0,0,0))'\n    }\n  }, innerProps), glam(\"span\", null), glam(\"span\", null, allowFullscreen ? glam(FullscreenButton, {\n    getStyles: getStyles,\n    innerProps: {\n      onClick: toggleFullscreen,\n      title: getFullscreenLabel(state)\n    }\n  }, glam(FsIcon, {\n    size: 32\n  })) : null, glam(CloseButton, {\n    getStyles: getStyles,\n    innerProps: {\n      onClick: onClose,\n      title: getCloseLabel(state)\n    }\n  }, glam(Close, {\n    size: 32\n  }))));\n}; // ==============================\n// Header Buttons\n// ==============================\n\n\nvar headerButtonCSS = function headerButtonCSS() {\n  return {\n    alignItems: 'center',\n    background: 0,\n    border: 0,\n    color: 'rgba(255, 255, 255, 0.75)',\n    cursor: 'pointer',\n    display: 'inline-flex ',\n    height: 44,\n    justifyContent: 'center',\n    outline: 0,\n    padding: 0,\n    position: 'relative',\n    width: 44,\n    '&:hover': {\n      color: 'white'\n    }\n  };\n};\n\nvar headerFullscreenCSS = headerButtonCSS;\n\nvar HeaderFullscreen = function HeaderFullscreen(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return glam(Button, _extends({\n    css: getStyles('headerFullscreen', props),\n    className: className(['header_button', 'header_button--fullscreen']),\n    type: \"button\"\n  }, innerProps), children);\n};\n\nvar headerCloseCSS = headerButtonCSS;\n\nvar HeaderClose = function HeaderClose(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return glam(Button, _extends({\n    css: getStyles('headerClose', props),\n    className: className(['header_button', 'header_button--close']),\n    type: \"button\"\n  }, innerProps), children);\n}; // Navigation\n// ==============================\n\n\nvar navigationCSS = function navigationCSS(_ref) {\n  var interactionIsIdle = _ref.interactionIsIdle;\n  return {\n    display: 'flex ',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    opacity: interactionIsIdle ? 0 : 1,\n    transition: 'opacity 300ms'\n  };\n};\n\nvar Navigation = function Navigation(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal;\n  return !isTouch() ? glam(Nav, {\n    css: getStyles('navigation', props),\n    className: className('navigation', {\n      isFullscreen: isFullscreen,\n      isModal: isModal\n    })\n  }, children) : null;\n}; // ==============================\n// Nav Item\n// ==============================\n\n\nvar BUTTON_SIZE = 50;\n\nvar navigationItemCSS = function navigationItemCSS(_ref2) {\n  var _ref3;\n\n  var align = _ref2.align;\n  return _ref3 = {\n    alignItems: 'center',\n    background: 'rgba(255, 255, 255, 0.2)',\n    border: 0,\n    borderRadius: '50%',\n    color: 'white',\n    cursor: 'pointer',\n    display: 'flex ',\n    fontSize: 'inherit',\n    height: BUTTON_SIZE,\n    justifyContent: 'center',\n    marginTop: -(BUTTON_SIZE / 2),\n    outline: 0,\n    position: 'absolute',\n    top: '50%',\n    transition: 'background-color 200ms',\n    width: BUTTON_SIZE\n  }, _defineProperty(_ref3, align, 20), _defineProperty(_ref3, '&:hover', {\n    background: 'rgba(255, 255, 255, 0.3)'\n  }), _defineProperty(_ref3, '&:active', {\n    background: 'rgba(255, 255, 255, 0.2)'\n  }), _ref3;\n};\n\nvar navigationPrevCSS = navigationItemCSS;\n\nvar NavigationPrev = function NavigationPrev(props) {\n  var _props$children = props.children,\n      children = _props$children === void 0 ? glam(ChevronLeft, {\n    size: 48\n  }) : _props$children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return glam(Button, _extends({\n    type: \"button\",\n    css: getStyles('navigationPrev', props)\n  }, innerProps), children);\n};\n\nvar navigationNextCSS = navigationItemCSS;\n\nvar NavigationNext = function NavigationNext(props) {\n  var _props$children2 = props.children,\n      children = _props$children2 === void 0 ? glam(ChevronRight, {\n    size: 48\n  }) : _props$children2,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return glam(Button, _extends({\n    type: \"button\",\n    css: getStyles('navigationNext', props)\n  }, innerProps), children);\n}; // Blanket\n// ==============================\n\n\nvar blanketCSS = function blanketCSS(_ref) {\n  var isFullscreen = _ref.isFullscreen;\n  return {\n    backgroundColor: isFullscreen ? 'black' : 'rgba(0, 0, 0, 0.8)',\n    bottom: 0,\n    left: 0,\n    position: 'fixed',\n    right: 0,\n    top: 0,\n    zIndex: 1\n  };\n};\n\nvar Blanket = function Blanket(props) {\n  var getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen;\n  return glam(Div, _extends({\n    css: getStyles('blanket', props),\n    className: className('blanket', {\n      isFullscreen: isFullscreen\n    })\n  }, innerProps));\n}; // ==============================\n// Positioner\n// ==============================\n\n\nvar positionerCSS = function positionerCSS() {\n  return {\n    alignItems: 'center',\n    bottom: 0,\n    display: 'flex ',\n    justifyContent: 'center',\n    left: 0,\n    position: 'fixed',\n    right: 0,\n    top: 0,\n    zIndex: 1\n  };\n};\n\nvar Positioner = function Positioner(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen;\n  return glam(Div, _extends({\n    css: getStyles('positioner', props),\n    className: className('positioner', {\n      isFullscreen: isFullscreen\n    })\n  }, innerProps), children);\n}; // ==============================\n// Dialog\n// ==============================\n\n\nvar dialogCSS = function dialogCSS() {\n  return {\n    width: '100%'\n  };\n};\n\nvar Dialog = function Dialog(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen;\n  return glam(Div, _extends({\n    css: getStyles('dialog', props),\n    className: className('dialog', {\n      isFullscreen: isFullscreen\n    })\n  }, innerProps), children);\n};\n\nfunction getSource(_ref) {\n  var data = _ref.data,\n      isFullscreen = _ref.isFullscreen;\n  var _data$source = data.source,\n      source = _data$source === void 0 ? data.src : _data$source;\n  if (typeof source === 'string') return source;\n  return isFullscreen ? source.fullscreen : source.regular;\n}\n\nvar viewCSS = function viewCSS() {\n  return {\n    lineHeight: 0,\n    position: 'relative',\n    textAlign: 'center'\n  };\n};\n\nvar View = function View(props) {\n  var data = props.data,\n      formatters = props.formatters,\n      getStyles = props.getStyles,\n      index = props.index,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal;\n  var innerProps = {\n    alt: formatters.getAltText({\n      data: data,\n      index: index\n    }),\n    src: getSource({\n      data: data,\n      isFullscreen: isFullscreen\n    })\n  };\n  return glam(Div, {\n    css: getStyles('view', props),\n    className: className('view', {\n      isFullscreen: isFullscreen,\n      isModal: isModal\n    })\n  }, glam(Img, _extends({}, innerProps, {\n    className: className('view-image', {\n      isFullscreen: isFullscreen,\n      isModal: isModal\n    }),\n    css: {\n      height: 'auto',\n      maxHeight: '100vh',\n      maxWidth: '100vw',\n      userSelect: 'none'\n    }\n  })));\n};\n\nvar carouselComponents = {\n  Container: Container,\n  Footer: Footer,\n  FooterCaption: FooterCaption,\n  FooterCount: FooterCount,\n  Header: Header,\n  HeaderClose: HeaderClose,\n  HeaderFullscreen: HeaderFullscreen,\n  Navigation: Navigation,\n  NavigationPrev: NavigationPrev,\n  NavigationNext: NavigationNext,\n  View: View\n};\n\nvar defaultCarouselComponents = function defaultCarouselComponents(providedComponents) {\n  return _objectSpread2({}, carouselComponents, {}, providedComponents);\n}; // ==============================\n// Modal\n// ==============================\n\n\nvar modalComponents = {\n  Blanket: Blanket,\n  Positioner: Positioner,\n  Dialog: Dialog\n};\n\nvar defaultModalComponents = function defaultModalComponents(providedComponents) {\n  return _objectSpread2({}, modalComponents, {}, providedComponents);\n};\n\nvar defaultCarouselStyles = {\n  container: containerCSS,\n  footer: footerCSS,\n  footerCaption: footerCaptionCSS,\n  footerCount: footerCountCSS,\n  header: headerCSS,\n  headerClose: headerCloseCSS,\n  headerFullscreen: headerFullscreenCSS,\n  navigation: navigationCSS,\n  navigationPrev: navigationPrevCSS,\n  navigationNext: navigationNextCSS,\n  view: viewCSS\n};\nvar defaultModalStyles = {\n  blanket: blanketCSS,\n  dialog: dialogCSS,\n  positioner: positionerCSS\n}; // Merge Utility\n// NOTE: props aren't used by default for some getters but consumers may need\n// them, this needs to be reflected in the flow type.\n\n/* eslint-disable no-unused-vars */\n// ==============================\n// Navigation\n// ==============================\n\n/* ARIA label for the next button */\n\nfunction getNextLabel(_ref) {\n  var currentIndex = _ref.currentIndex,\n      views = _ref.views;\n  return \"Show slide \".concat(currentIndex + 2, \" of \").concat(views.length);\n}\n/* ARIA label for the previous button */\n\n\nfunction getPrevLabel(_ref2) {\n  var currentIndex = _ref2.currentIndex,\n      views = _ref2.views;\n  return \"Show slide \".concat(currentIndex, \" of \").concat(views.length);\n}\n/* HTML title for the next button */\n\n\nfunction getNextTitle(props) {\n  return 'Next (right arrow)';\n}\n/* HTML title for the previous button */\n\n\nfunction getPrevTitle(props) {\n  return 'Previous (left arrow)';\n} // ==============================\n// Header\n// ==============================\n\n/* ARIA label for the close button */\n\n\nfunction getCloseLabel(props) {\n  return 'Close (esc)';\n}\n/* ARIA label for the fullscreen button */\n\n\nfunction getFullscreenLabel(_ref3) {\n  var isFullscreen = _ref3.isFullscreen;\n  return isFullscreen ? 'Exit fullscreen (f)' : 'Enter fullscreen (f)';\n} // ==============================\n// View\n// ==============================\n\n/* alt text for each image in the carousel */\n\n\nfunction getAltText(_ref4) {\n  var data = _ref4.data,\n      index = _ref4.index;\n  if (data.caption) return data.caption;\n  return \"Image \".concat(index + 1);\n} // ==============================\n// Exports\n// ==============================\n\n\nvar formatters = {\n  getAltText: getAltText,\n  getNextLabel: getNextLabel,\n  getPrevLabel: getPrevLabel,\n  getNextTitle: getNextTitle,\n  getPrevTitle: getPrevTitle,\n  getCloseLabel: getCloseLabel,\n  getFullscreenLabel: getFullscreenLabel\n};\nvar viewPagerStyles = {\n  flex: '1 1 auto',\n  position: 'relative'\n};\nvar frameStyles = {\n  outline: 0\n};\nvar defaultProps = {\n  currentIndex: 0,\n  formatters: formatters,\n  hideControlsWhenIdle: 3000,\n  styles: {},\n  trackProps: {\n    instant: !isTouch(),\n    swipe: 'touch'\n  }\n};\n\nvar Carousel =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Carousel, _Component); // TODO\n\n\n  function Carousel(props) {\n    var _this;\n\n    _classCallCheck(this, Carousel);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Carousel).call(this, props));\n\n    _initialiseProps.call(_assertThisInitialized(_this));\n\n    _this.cacheComponents(props.components);\n\n    _this.state = {\n      currentIndex: props.currentIndex,\n      interactionIsIdle: isTouch()\n    };\n    return _this;\n  }\n\n  _createClass(Carousel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          hideControlsWhenIdle = _this$props.hideControlsWhenIdle,\n          modalProps = _this$props.modalProps;\n      var isModal = Boolean(modalProps);\n      this.mounted = true;\n\n      if (hideControlsWhenIdle && this.container) {\n        this.container.addEventListener('mousedown', this.handleMouseActivity);\n        this.container.addEventListener('mousemove', this.handleMouseActivity);\n        this.container.addEventListener('touchmove', this.handleMouseActivity);\n      }\n\n      if (isModal) {\n        this.focusViewFrame();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.components !== this.props.components) {\n        this.cacheComponents(prevProps.components);\n      }\n\n      if (this.props.currentIndex !== prevProps.currentIndex) {\n        this.setState({\n          currentIndex: prevProps.currentIndex\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.mounted = false;\n\n      if (this.props.hideControlsWhenIdle && this.container) {\n        this.container.removeEventListener('mousedown', this.handleMouseActivity);\n        this.container.removeEventListener('mousemove', this.handleMouseActivity);\n        this.container.removeEventListener('touchmove', this.handleMouseActivity);\n        this.handleMouseActivity.cancel();\n      }\n    }\n  }, {\n    key: \"getCommonProps\",\n    value: function getCommonProps() {\n      var _this$props2 = this.props,\n          frameProps = _this$props2.frameProps,\n          trackProps = _this$props2.trackProps,\n          modalProps = _this$props2.modalProps,\n          views = _this$props2.views;\n      var isModal = Boolean(modalProps);\n      var isFullscreen = Boolean(modalProps && modalProps.isFullscreen);\n      var _this$state = this.state,\n          currentIndex = _this$state.currentIndex,\n          interactionIsIdle = _this$state.interactionIsIdle;\n      var currentView = this.getViewData();\n      return {\n        carouselProps: this.props,\n        currentIndex: currentIndex,\n        currentView: currentView,\n        formatters: this.props.formatters,\n        frameProps: frameProps,\n        getStyles: this.getStyles,\n        isFullscreen: isFullscreen,\n        isModal: isModal,\n        modalProps: modalProps,\n        interactionIsIdle: interactionIsIdle,\n        trackProps: trackProps,\n        views: views\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$components = this.components,\n          Container = _this$components.Container,\n          View = _this$components.View;\n      var currentIndex = this.state.currentIndex;\n      var _this$props3 = this.props,\n          frameProps = _this$props3.frameProps,\n          views = _this$props3.views;\n      var commonProps = this.commonProps = this.getCommonProps();\n      return glam(Container, _extends({}, commonProps, {\n        innerProps: {\n          innerRef: this.getContainer\n        }\n      }), this.renderHeader(), glam(ViewPager, {\n        tag: \"main\",\n        style: viewPagerStyles,\n        className: className('pager')\n      }, glam(Frame, _extends({}, frameProps, {\n        ref: this.getFrame,\n        className: className('frame'),\n        style: frameStyles\n      }), glam(Track, _extends({}, this.getTrackProps(this.props), {\n        style: {\n          display: 'flex',\n          alignItems: 'center'\n        },\n        currentView: currentIndex,\n        className: className('track'),\n        onViewChange: this.handleViewChange,\n        ref: this.getTrack\n      }), views && views.map(function (data, index) {\n        return glam(View$1, {\n          className: className('view-wrapper'),\n          key: index\n        }, glam(View, _extends({}, commonProps, {\n          data: data,\n          index: index\n        })));\n      }))), this.renderNavigation()), this.renderFooter());\n    }\n  }]);\n\n  return Carousel;\n}(Component);\n\nCarousel.defaultProps = defaultProps;\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.mounted = false;\n\n  this.cacheComponents = function (comps) {\n    _this2.components = defaultCarouselComponents(comps);\n  };\n\n  this.getContainer = function (ref) {\n    _this2.container = ref;\n  };\n\n  this.getFooter = function (ref) {\n    _this2.footer = ref;\n  };\n\n  this.getFrame = function (ref) {\n    _this2.frame = findDOMNode(ref);\n  };\n\n  this.getHeader = function (ref) {\n    _this2.header = ref;\n  };\n\n  this.getTrack = function (ref) {\n    _this2.track = ref;\n  };\n\n  this.hasPreviousView = function () {\n    var trackProps = _this2.props.trackProps;\n    var currentIndex = _this2.state.currentIndex;\n    return trackProps.infinite || currentIndex !== 0;\n  };\n\n  this.hasNextView = function () {\n    var _this2$props = _this2.props,\n        trackProps = _this2$props.trackProps,\n        views = _this2$props.views;\n    var currentIndex = _this2.state.currentIndex;\n    return trackProps.infinite || currentIndex !== views.length - 1;\n  };\n\n  this.getStyles = function (key, props) {\n    var base = defaultCarouselStyles[key](props);\n    base.boxSizing = 'border-box';\n    var custom = _this2.props.styles[key];\n    return custom ? custom(base, props) : base;\n  };\n\n  this.getTrackProps = function (props) {\n    return _objectSpread2({}, defaultProps.trackProps, {}, props.trackProps);\n  };\n\n  this.getFormatters = function () {\n    return _objectSpread2({}, defaultProps.formatters, {}, _this2.props.formatters);\n  };\n\n  this.getViewData = function () {\n    var views = _this2.props.views;\n    var currentIndex = _this2.state.currentIndex;\n    return views[currentIndex];\n  };\n\n  this.focusViewFrame = function () {\n    if (_this2.frame && document.activeElement !== _this2.frame) {\n      _this2.frame.focus();\n    }\n  };\n\n  this.prev = function () {\n    _this2.track.prev();\n\n    _this2.focusViewFrame();\n  };\n\n  this.next = function () {\n    _this2.track.next();\n\n    _this2.focusViewFrame();\n  };\n\n  this.handleMouseActivity = rafScheduler(function () {\n    clearTimeout(_this2.timer);\n\n    if (_this2.state.interactionIsIdle) {\n      _this2.setState({\n        interactionIsIdle: false\n      });\n    }\n\n    _this2.timer = setTimeout(function () {\n      if (_this2.mounted) {\n        _this2.setState({\n          interactionIsIdle: true\n        });\n      }\n    }, _this2.props.hideControlsWhenIdle);\n  });\n\n  this.handleViewChange = function (indicies) {\n    var trackProps = _this2.props.trackProps; // simplify by enforcing number\n\n    var currentIndex = indicies[0];\n\n    _this2.setState({\n      currentIndex: currentIndex\n    }); // call the consumer's onViewChange fn\n\n\n    if (trackProps && trackProps.onViewChange) {\n      trackProps.onViewChange(currentIndex);\n    }\n  };\n\n  this.renderNavigation = function () {\n    var _this2$getFormatters = _this2.getFormatters(),\n        getNextLabel = _this2$getFormatters.getNextLabel,\n        getPrevLabel = _this2$getFormatters.getPrevLabel,\n        getNextTitle = _this2$getFormatters.getNextTitle,\n        getPrevTitle = _this2$getFormatters.getPrevTitle;\n\n    var _this2$components = _this2.components,\n        Navigation = _this2$components.Navigation,\n        NavigationPrev = _this2$components.NavigationPrev,\n        NavigationNext = _this2$components.NavigationNext;\n    var commonProps = _this2.commonProps;\n\n    var showPrev = _this2.hasPreviousView();\n\n    var showNext = _this2.hasNextView();\n\n    var showNav = (showPrev || showNext) && Navigation;\n    return showNav ? glam(Navigation, commonProps, showPrev && glam(NavigationPrev, _extends({}, commonProps, {\n      align: \"left\",\n      innerProps: {\n        'aria-label': getPrevLabel(commonProps),\n        onClick: _this2.prev,\n        title: getPrevTitle(commonProps)\n      }\n    })), showNext && glam(NavigationNext, _extends({}, commonProps, {\n      align: \"right\",\n      innerProps: {\n        'aria-label': getNextLabel(commonProps),\n        onClick: _this2.next,\n        title: getNextTitle(commonProps)\n      }\n    }))) : null;\n  };\n\n  this.renderFooter = function () {\n    var _this2$components2 = _this2.components,\n        Footer = _this2$components2.Footer,\n        FooterCaption = _this2$components2.FooterCaption,\n        FooterCount = _this2$components2.FooterCount;\n    var commonProps = _this2.commonProps;\n    return Footer ? glam(Footer, _extends({}, commonProps, {\n      components: {\n        Caption: FooterCaption,\n        Count: FooterCount\n      },\n      innerProps: {\n        innerRef: _this2.getFooter\n      }\n    })) : null;\n  };\n\n  this.renderHeader = function () {\n    var _this2$components3 = _this2.components,\n        Header = _this2$components3.Header,\n        HeaderClose = _this2$components3.HeaderClose,\n        HeaderFullscreen = _this2$components3.HeaderFullscreen;\n\n    var _this2$getFormatters2 = _this2.getFormatters(),\n        getCloseLabel = _this2$getFormatters2.getCloseLabel,\n        getFullscreenLabel = _this2$getFormatters2.getFullscreenLabel;\n\n    var commonProps = _this2.commonProps;\n    return Header ? glam(Header, _extends({}, commonProps, {\n      getCloseLabel: getCloseLabel,\n      getFullscreenLabel: getFullscreenLabel,\n      components: {\n        CloseButton: HeaderClose,\n        FullscreenButton: HeaderFullscreen\n      },\n      data: _this2.getViewData(),\n      innerProps: {\n        innerRef: _this2.getHeader\n      }\n    })) : null;\n  };\n};\n\nvar FirstChild = function FirstChild(_ref) {\n  var children = _ref.children;\n  return Children.toArray(children)[0] || null;\n};\n\nvar ModalGateway =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ModalGateway, _Component);\n\n  function ModalGateway() {\n    _classCallCheck(this, ModalGateway);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ModalGateway).apply(this, arguments));\n  }\n\n  _createClass(ModalGateway, [{\n    key: \"render\",\n    value: function render() {\n      if (typeof window === 'undefined') return null;\n      var _this$props = this.props,\n          target = _this$props.target,\n          children = _this$props.children;\n      return createPortal(React.createElement(TransitionGroup, {\n        component: FirstChild,\n        children: children\n      }), target);\n    }\n  }]);\n\n  return ModalGateway;\n}(Component);\n\nModalGateway.defaultProps = {\n  target: typeof window !== 'undefined' ? document.body : null\n};\nvar easing = 'cubic-bezier(0.23, 1, 0.32, 1)'; // easeOutQuint\n\nvar verticalOffset = 40; // ==============================\n// Fade\n// ==============================\n\nvar Fade = function Fade(_ref) {\n  var Tag = _ref.component,\n      onEntered = _ref.onEntered,\n      onExited = _ref.onExited,\n      inProp = _ref[\"in\"],\n      originalProps = _ref.innerProps,\n      props = _objectWithoutProperties(_ref, [\"component\", \"onEntered\", \"onExited\", \"in\", \"innerProps\"]);\n\n  var enter = 300;\n  var exit = 500;\n  var fadeStyle = {\n    transition: 'opacity 200ms',\n    opacity: 0\n  };\n  var fadeTransition = {\n    entering: {\n      opacity: 0\n    },\n    entered: {\n      opacity: 1\n    },\n    exiting: {\n      opacity: 0,\n      transitionDuration: \"\".concat(exit, \"ms\")\n    }\n  };\n  return React.createElement(Transition, {\n    appear: true,\n    mountOnEnter: true,\n    unmountOnExit: true,\n    onEntered: onEntered,\n    onExited: onExited,\n    key: \"fade\",\n    \"in\": inProp,\n    timeout: {\n      enter: enter,\n      exit: exit\n    }\n  }, function (status) {\n    var innerProps = _objectSpread2({}, originalProps, {\n      style: _objectSpread2({}, fadeStyle, {}, fadeTransition[status])\n    });\n\n    if (status === 'exited') return null;\n    return React.createElement(Tag, _extends({\n      innerProps: innerProps\n    }, props));\n  });\n}; // ==============================\n// Slide Up\n// ==============================\n\n\nvar SlideUp = function SlideUp(_ref2) {\n  var Tag = _ref2.component,\n      onEntered = _ref2.onEntered,\n      onExited = _ref2.onExited,\n      inProp = _ref2[\"in\"],\n      originalProps = _ref2.innerProps,\n      props = _objectWithoutProperties(_ref2, [\"component\", \"onEntered\", \"onExited\", \"in\", \"innerProps\"]);\n\n  var enter = 300;\n  var exit = 500;\n  var restingTransform = 'translate3d(0, 0, 0)';\n  var slideStyle = {\n    transition: \"transform \".concat(enter, \"ms \").concat(easing, \", opacity \").concat(enter, \"ms \").concat(easing),\n    transform: restingTransform\n  };\n  var slideTransition = {\n    entering: {\n      opacity: 0,\n      transform: \"translate3d(0, \".concat(verticalOffset, \"px, 0) scale(0.9)\")\n    },\n    entered: {\n      opacity: 1,\n      transform: restingTransform\n    },\n    exiting: {\n      opacity: 0,\n      transform: \"translate3d(0, \".concat(verticalOffset, \"px, 0) scale(0.9)\"),\n      transition: \"transform \".concat(exit, \"ms \").concat(easing, \", opacity \").concat(exit, \"ms \").concat(easing)\n    }\n  };\n  return React.createElement(Transition, {\n    appear: true,\n    \"in\": inProp,\n    mountOnEnter: true,\n    onEntered: onEntered,\n    onExited: onExited,\n    timeout: {\n      enter: enter,\n      exit: exit\n    },\n    unmountOnExit: true\n  }, function (status) {\n    if (status === 'exited') return null;\n\n    var innerProps = _objectSpread2({}, originalProps, {\n      style: _objectSpread2({}, slideStyle, {}, slideTransition[status])\n    });\n\n    return React.createElement(Tag, _extends({\n      innerProps: innerProps\n    }, props));\n  });\n};\n\nvar defaultProps$1 = {\n  allowFullscreen: !isTouch(),\n  closeOnBackdropClick: true,\n  closeOnEsc: true,\n  styles: {}\n};\n\nvar Modal =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Modal, _Component); // TODO\n\n\n  function Modal(props) {\n    var _this;\n\n    _classCallCheck(this, Modal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Modal).call(this, props));\n\n    _initialiseProps$1.call(_assertThisInitialized(_this));\n\n    _this.cacheComponents(props.components);\n\n    _this.state = {\n      isFullscreen: false\n    };\n    return _this;\n  }\n\n  _createClass(Modal, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.components !== this.props.components) {\n        this.cacheComponents(prevProps.components);\n      }\n    } // emulate `componentDidMount` & `componentWillUnmount`\n    // called on complete of enter & exit transitions respectively\n\n  }, {\n    key: \"getCommonProps\",\n    value: function getCommonProps() {\n      var isFullscreen = this.state.isFullscreen;\n      return {\n        getStyles: this.getStyles,\n        isFullscreen: isFullscreen,\n        modalProps: this.props\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$components = this.components,\n          Blanket = _this$components.Blanket,\n          Positioner = _this$components.Positioner,\n          Dialog = _this$components.Dialog;\n      var _this$props = this.props,\n          allowFullscreen = _this$props.allowFullscreen,\n          children = _this$props.children;\n      var isFullscreen = this.state.isFullscreen;\n      var commonProps = this.commonProps = this.getCommonProps(); // $FlowFixMe\n\n      var transitionIn = this.props[\"in\"]; // forward props to modal for use in internal components\n\n      var modalProps = {\n        allowFullscreen: allowFullscreen,\n        isFullscreen: isFullscreen,\n        onClose: this.handleClose,\n        toggleFullscreen: this.toggleFullscreen\n      }; // augment user carousel with modal props\n      // $FlowFixMe\n\n      var carouselComponent = cloneElement(children, {\n        isModal: true,\n        modalProps: modalProps\n      });\n      return glam(Fullscreen, {\n        enabled: isFullscreen,\n        onChange: this.handleFullscreenChange\n      }, glam(Fade, _extends({}, commonProps, {\n        component: Blanket,\n        \"in\": transitionIn\n      })), glam(SlideUp, _extends({}, commonProps, {\n        component: Positioner,\n        \"in\": transitionIn,\n        innerProps: {\n          onClick: this.handleBackdropClick\n        },\n        onEntered: this.modalDidMount,\n        onExited: this.modalWillUnmount\n      }), glam(Dialog, commonProps, carouselComponent), glam(ScrollLock, null)));\n    }\n  }]);\n\n  return Modal;\n}(Component);\n\nModal.defaultProps = defaultProps$1;\n\nvar _initialiseProps$1 = function _initialiseProps() {\n  var _this2 = this;\n\n  this.modalDidMount = function () {\n    document.addEventListener('keyup', _this2.handleKeyUp);\n    focusStore.storeFocus();\n  };\n\n  this.modalWillUnmount = function () {\n    document.removeEventListener('keyup', _this2.handleKeyUp);\n    focusStore.restoreFocus();\n  };\n\n  this.cacheComponents = function (comps) {\n    _this2.components = defaultModalComponents(comps);\n  };\n\n  this.handleFullscreenChange = function (isFullscreen) {\n    _this2.setState({\n      isFullscreen: isFullscreen\n    });\n  };\n\n  this.handleKeyUp = function (event) {\n    var _this2$props = _this2.props,\n        allowFullscreen = _this2$props.allowFullscreen,\n        closeOnEsc = _this2$props.closeOnEsc;\n    var isFullscreen = _this2.state.isFullscreen;\n    var allowClose = event.key === 'Escape' && closeOnEsc && !isFullscreen; // toggle fullscreen\n\n    if (allowFullscreen && event.key === 'f') {\n      _this2.toggleFullscreen();\n    } // close on escape when not fullscreen\n\n\n    if (allowClose) _this2.handleClose(event);\n  };\n\n  this.handleBackdropClick = function (event) {\n    var closeOnBackdropClick = _this2.props.closeOnBackdropClick;\n    if (!event.target.classList.contains(className('view')) || !closeOnBackdropClick) return;\n\n    _this2.handleClose(event);\n  };\n\n  this.toggleFullscreen = function () {\n    _this2.setState(function (state) {\n      return {\n        isFullscreen: !state.isFullscreen\n      };\n    });\n  };\n\n  this.handleClose = function (event) {\n    var onClose = _this2.props.onClose;\n    var isFullscreen = _this2.state.isFullscreen; // force exit fullscreen mode on close\n\n    if (isFullscreen) {\n      _this2.toggleFullscreen();\n    } // call the consumer's onClose func\n\n\n    onClose(event);\n  };\n\n  this.getStyles = function (key, props) {\n    var base = defaultModalStyles[key](props);\n    base.boxSizing = 'border-box';\n    var custom = _this2.props.styles[key];\n    return custom ? custom(base, props) : base;\n  };\n};\n\nexport default Carousel;\nexport { Modal, ModalGateway, carouselComponents, modalComponents };","map":{"version":3,"sources":["/Users/mathewmozaffari/Downloads/agm-website-react-master/node_modules/react-images/dist/react-images.es.js"],"names":["React","Component","Children","cloneElement","findDOMNode","createPortal","glam","rafScheduler","ViewPager","Frame","Track","View","View$1","TransitionGroup","Transition","Fullscreen","ScrollLock","focusStore","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_defineProperty","obj","value","_extends","assign","arguments","source","hasOwnProperty","call","apply","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","_objectSpread2","forEach","getOwnPropertyDescriptors","defineProperties","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_objectWithoutPropertiesLoose","excluded","sourceKeys","indexOf","_objectWithoutProperties","sourceSymbolKeys","propertyIsEnumerable","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","Base","_ref","css","innerRef","Tag","tag","ref","boxSizing","Button","Div","Img","Nav","Span","CLASS_PREFIX","className","name","state","arr","Array","isArray","_key","concat","map","cn","join","isTouch","document","createEvent","e","containerCSS","isFullscreen","backgroundColor","display","flexDirection","height","Container","children","getStyles","isModal","innerProps","smallDevice","footerCSS","interactionIsIdle","alignItems","bottom","color","flex","fontSize","justifyContent","left","opacity","padding","position","right","transform","transition","zIndex","Footer","components","style","background","container","caption","count","Caption","Count","footerCaptionCSS","FooterCaption","currentView","footerCountCSS","flexShrink","marginLeft","FooterCount","currentIndex","views","activeView","totalViews","Svg","size","role","viewBox","fill","stroke","strokeWidth","width","ChevronLeft","_ref2","_ref2$size","d","ChevronRight","_ref3","_ref3$size","Close","_ref4","_ref4$size","FullscreenEnter","_ref5","_ref5$size","FullscreenExit","_ref6","_ref6$size","headerCSS","paddingBottom","top","Header","getCloseLabel","getFullscreenLabel","modalProps","allowFullscreen","onClose","toggleFullscreen","FsIcon","CloseButton","FullscreenButton","onClick","title","headerButtonCSS","border","cursor","outline","headerFullscreenCSS","HeaderFullscreen","type","headerCloseCSS","HeaderClose","navigationCSS","Navigation","BUTTON_SIZE","navigationItemCSS","align","borderRadius","marginTop","navigationPrevCSS","NavigationPrev","_props$children","navigationNextCSS","NavigationNext","_props$children2","blanketCSS","Blanket","positionerCSS","Positioner","dialogCSS","Dialog","getSource","data","_data$source","src","fullscreen","regular","viewCSS","lineHeight","textAlign","formatters","index","alt","getAltText","maxHeight","maxWidth","userSelect","carouselComponents","defaultCarouselComponents","providedComponents","modalComponents","defaultModalComponents","defaultCarouselStyles","footer","footerCaption","footerCount","header","headerClose","headerFullscreen","navigation","navigationPrev","navigationNext","view","defaultModalStyles","blanket","dialog","positioner","getNextLabel","getPrevLabel","getNextTitle","getPrevTitle","viewPagerStyles","frameStyles","defaultProps","hideControlsWhenIdle","styles","trackProps","instant","swipe","Carousel","_Component","_this","_initialiseProps","cacheComponents","componentDidMount","_this$props","Boolean","mounted","addEventListener","handleMouseActivity","focusViewFrame","componentDidUpdate","prevProps","setState","componentWillUnmount","removeEventListener","cancel","getCommonProps","_this$props2","frameProps","_this$state","getViewData","carouselProps","render","_this$components","_this$props3","commonProps","getContainer","renderHeader","getFrame","getTrackProps","onViewChange","handleViewChange","getTrack","renderNavigation","renderFooter","_this2","comps","getFooter","frame","getHeader","track","hasPreviousView","infinite","hasNextView","_this2$props","base","custom","getFormatters","activeElement","focus","prev","next","clearTimeout","timer","setTimeout","indicies","_this2$getFormatters","_this2$components","showPrev","showNext","showNav","_this2$components2","_this2$components3","_this2$getFormatters2","FirstChild","toArray","ModalGateway","window","createElement","component","body","easing","verticalOffset","Fade","onEntered","onExited","inProp","originalProps","enter","exit","fadeStyle","fadeTransition","entering","entered","exiting","transitionDuration","appear","mountOnEnter","unmountOnExit","timeout","status","SlideUp","restingTransform","slideStyle","slideTransition","defaultProps$1","closeOnBackdropClick","closeOnEsc","Modal","_initialiseProps$1","transitionIn","handleClose","carouselComponent","enabled","onChange","handleFullscreenChange","handleBackdropClick","modalDidMount","modalWillUnmount","handleKeyUp","storeFocus","restoreFocus","event","allowClose","classList","contains"],"mappings":"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","sourcesContent":["import React, { Component, Children, cloneElement } from 'react';\nimport { findDOMNode, createPortal } from 'react-dom';\nimport glam from 'glam';\nimport rafScheduler from 'raf-schd';\nimport { ViewPager, Frame, Track, View as View$1 } from 'react-view-pager';\nimport { TransitionGroup, Transition } from 'react-transition-group';\nimport Fullscreen from 'react-full-screen';\nimport ScrollLock from 'react-scrolllock';\nimport focusStore from 'a11y-focus-store';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nvar Base = function Base(_ref) {\n  var css = _ref.css,\n      innerRef = _ref.innerRef,\n      Tag = _ref.tag,\n      props = _objectWithoutProperties(_ref, [\"css\", \"innerRef\", \"tag\"]);\n\n  return glam(Tag, _extends({\n    ref: innerRef,\n    css: _objectSpread2({\n      boxSizing: 'border-box'\n    }, css)\n  }, props));\n};\nvar Button = function Button(props) {\n  return glam(Base, _extends({\n    tag: \"button\"\n  }, props));\n};\nvar Div = function Div(props) {\n  return glam(Base, _extends({\n    tag: \"div\"\n  }, props));\n};\nvar Img = function Img(props) {\n  return glam(Base, _extends({\n    tag: \"img\"\n  }, props));\n};\nvar Nav = function Nav(props) {\n  return glam(Base, _extends({\n    tag: \"nav\"\n  }, props));\n};\nvar Span = function Span(props) {\n  return glam(Base, _extends({\n    tag: \"span\"\n  }, props));\n};\n\n// ==============================\n// Class Name Prefixer\n// ==============================\n\nvar CLASS_PREFIX = 'react-images';\n/**\r\n String representation of component state for styling with class names.\r\n\r\n Expects an array of strings OR a string/object pair:\r\n - className(['comp', 'comp-arg', 'comp-arg-2'])\r\n   @returns 'react-images__comp react-images__comp-arg react-images__comp-arg-2'\r\n - className('comp', { some: true, state: false })\r\n   @returns 'react-images__comp react-images__comp--some'\r\n*/\n\nfunction className(name, state) {\n  var arr = Array.isArray(name) ? name : [name]; // loop through state object, remove falsey values and combine with name\n\n  if (state && typeof name === 'string') {\n    for (var _key in state) {\n      if (state.hasOwnProperty(_key) && state[_key]) {\n        arr.push(\"\".concat(name, \"--\").concat(_key));\n      }\n    }\n  } // prefix everything and return a string\n\n\n  return arr.map(function (cn) {\n    return \"\".concat(CLASS_PREFIX, \"__\").concat(cn);\n  }).join(' ');\n} // ==============================\n// Touch Capability Detector\n// ==============================\n\nfunction isTouch() {\n  try {\n    document.createEvent('TouchEvent');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar containerCSS = function containerCSS(_ref) {\n  var isFullscreen = _ref.isFullscreen;\n  return {\n    backgroundColor: isFullscreen ? 'black' : null,\n    display: 'flex ',\n    flexDirection: 'column',\n    height: '100%'\n  };\n};\n\nvar Container = function Container(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal,\n      innerProps = props.innerProps;\n  return glam(Div, _extends({\n    css: getStyles('container', props),\n    className: className('container', {\n      isFullscreen: isFullscreen,\n      isModal: isModal\n    })\n  }, innerProps), children);\n};\n\nvar smallDevice = '@media (max-width: 769px)';\n\nvar footerCSS = function footerCSS(_ref) {\n  var isModal = _ref.isModal,\n      interactionIsIdle = _ref.interactionIsIdle;\n  return _defineProperty({\n    alignItems: 'top',\n    bottom: isModal ? 0 : null,\n    color: isModal ? 'rgba(255, 255, 255, 0.9)' : '#666',\n    display: 'flex ',\n    flex: '0 0 auto',\n    fontSize: 13,\n    justifyContent: 'space-between',\n    left: isModal ? 0 : null,\n    opacity: interactionIsIdle && isModal ? 0 : 1,\n    padding: isModal ? '30px 20px 20px' : '10px 0',\n    position: isModal ? 'absolute' : null,\n    right: isModal ? 0 : null,\n    transform: isModal ? \"translateY(\".concat(interactionIsIdle ? 10 : 0, \"px)\") : null,\n    transition: 'opacity 300ms, transform 300ms',\n    zIndex: isModal ? 1 : null\n  }, smallDevice, {\n    padding: isModal ? '20px 15px 15px' : '5px 0'\n  });\n};\n\nvar Footer = function Footer(props) {\n  var components = props.components,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal;\n  var style = isModal ? {\n    background: 'linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.33))'\n  } : null;\n  var state = {\n    isFullscreen: isFullscreen,\n    isModal: isModal\n  };\n  var cn = {\n    container: className('footer', state),\n    caption: className('footer__caption', state),\n    count: className('footer__count', state)\n  };\n  var css = {\n    container: getStyles('footer', props),\n    caption: getStyles('footerCaption', props),\n    count: getStyles('footerCount', props)\n  };\n  var Caption = components.Caption,\n      Count = components.Count;\n  return glam(Div, _extends({\n    css: css.container,\n    className: cn.container // TODO glam prefixer fails on gradients\n    // https://github.com/threepointone/glam/issues/35\n    ,\n    style: style\n  }, innerProps), glam(Caption, props), glam(Count, props));\n}; // ==============================\n// Inner Elements\n// ==============================\n\n\nvar footerCaptionCSS = function footerCaptionCSS() {\n  return {};\n};\nvar FooterCaption = function FooterCaption(props) {\n  var currentView = props.currentView,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal;\n  var caption = currentView.caption;\n  var state = {\n    isFullscreen: isFullscreen,\n    isModal: isModal\n  };\n  return glam(Span, {\n    css: getStyles('footerCaption', props),\n    className: className('footer__caption', state)\n  }, caption);\n};\nvar footerCountCSS = function footerCountCSS() {\n  return {\n    flexShrink: 0,\n    marginLeft: '1em'\n  };\n};\nvar FooterCount = function FooterCount(props) {\n  var currentIndex = props.currentIndex,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal,\n      views = props.views;\n  var state = {\n    isFullscreen: isFullscreen,\n    isModal: isModal\n  };\n  var activeView = currentIndex + 1;\n  var totalViews = views.length;\n  if (!activeView || !totalViews) return null;\n  return glam(Span, {\n    css: getStyles('footerCount', props),\n    className: className('footer__count', state)\n  }, activeView, \" of \", totalViews);\n};\n\nvar Svg = function Svg(_ref) {\n  var size = _ref.size,\n      props = _objectWithoutProperties(_ref, [\"size\"]);\n\n  return glam(\"svg\", _extends({\n    role: \"presentation\",\n    viewBox: \"0 0 24 24\",\n    css: {\n      display: 'inline-block',\n      fill: 'currentColor',\n      height: size,\n      stroke: 'currentColor',\n      strokeWidth: 0,\n      width: size\n    }\n  }, props));\n};\n\nvar ChevronLeft = function ChevronLeft(_ref2) {\n  var _ref2$size = _ref2.size,\n      size = _ref2$size === void 0 ? 32 : _ref2$size,\n      props = _objectWithoutProperties(_ref2, [\"size\"]);\n\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam(\"path\", {\n    d: \"M15.422 16.078l-1.406 1.406-6-6 6-6 1.406 1.406-4.594 4.594z\"\n  }));\n};\nvar ChevronRight = function ChevronRight(_ref3) {\n  var _ref3$size = _ref3.size,\n      size = _ref3$size === void 0 ? 32 : _ref3$size,\n      props = _objectWithoutProperties(_ref3, [\"size\"]);\n\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam(\"path\", {\n    d: \"M9.984 6l6 6-6 6-1.406-1.406 4.594-4.594-4.594-4.594z\"\n  }));\n};\nvar Close = function Close(_ref4) {\n  var _ref4$size = _ref4.size,\n      size = _ref4$size === void 0 ? 32 : _ref4$size,\n      props = _objectWithoutProperties(_ref4, [\"size\"]);\n\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam(\"path\", {\n    d: \"M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z\"\n  }));\n};\nvar FullscreenEnter = function FullscreenEnter(_ref5) {\n  var _ref5$size = _ref5.size,\n      size = _ref5$size === void 0 ? 32 : _ref5$size,\n      props = _objectWithoutProperties(_ref5, [\"size\"]);\n\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam(\"path\", {\n    d: \"M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z\"\n  }));\n};\nvar FullscreenExit = function FullscreenExit(_ref6) {\n  var _ref6$size = _ref6.size,\n      size = _ref6$size === void 0 ? 32 : _ref6$size,\n      props = _objectWithoutProperties(_ref6, [\"size\"]);\n\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam(\"path\", {\n    d: \"M15.984 8.016h3v1.969h-4.969v-4.969h1.969v3zM14.016 18.984v-4.969h4.969v1.969h-3v3h-1.969zM8.016 8.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 15.984v-1.969h4.969v4.969h-1.969v-3h-3z\"\n  }));\n};\n\nvar headerCSS = function headerCSS(_ref) {\n  var interactionIsIdle = _ref.interactionIsIdle;\n  return {\n    alignItems: 'center',\n    display: 'flex ',\n    flex: '0 0 auto',\n    justifyContent: 'space-between',\n    opacity: interactionIsIdle ? 0 : 1,\n    padding: 10,\n    paddingBottom: 20,\n    position: 'absolute',\n    transform: \"translateY(\".concat(interactionIsIdle ? -10 : 0, \"px)\"),\n    transition: 'opacity 300ms, transform 300ms',\n    top: 0,\n    left: 0,\n    right: 0,\n    zIndex: 1\n  };\n};\n\nvar Header = function Header(props) {\n  var components = props.components,\n      getStyles = props.getStyles,\n      getCloseLabel = props.getCloseLabel,\n      getFullscreenLabel = props.getFullscreenLabel,\n      innerProps = props.innerProps,\n      isModal = props.isModal,\n      modalProps = props.modalProps;\n  if (!isModal) return null;\n  var allowFullscreen = modalProps.allowFullscreen,\n      isFullscreen = modalProps.isFullscreen,\n      onClose = modalProps.onClose,\n      toggleFullscreen = modalProps.toggleFullscreen;\n  var FsIcon = isFullscreen ? FullscreenExit : FullscreenEnter;\n  var CloseButton = components.CloseButton,\n      FullscreenButton = components.FullscreenButton;\n  var state = {\n    isFullscreen: isFullscreen,\n    isModal: isModal\n  };\n  return glam(Div, _extends({\n    css: getStyles('header', props),\n    className: className('header', state) // TODO glam prefixer fails on gradients\n    // https://github.com/threepointone/glam/issues/35\n    ,\n    style: {\n      background: 'linear-gradient(rgba(0,0,0,0.33), rgba(0,0,0,0))'\n    }\n  }, innerProps), glam(\"span\", null), glam(\"span\", null, allowFullscreen ? glam(FullscreenButton, {\n    getStyles: getStyles,\n    innerProps: {\n      onClick: toggleFullscreen,\n      title: getFullscreenLabel(state)\n    }\n  }, glam(FsIcon, {\n    size: 32\n  })) : null, glam(CloseButton, {\n    getStyles: getStyles,\n    innerProps: {\n      onClick: onClose,\n      title: getCloseLabel(state)\n    }\n  }, glam(Close, {\n    size: 32\n  }))));\n}; // ==============================\n// Header Buttons\n// ==============================\n\n\nvar headerButtonCSS = function headerButtonCSS() {\n  return {\n    alignItems: 'center',\n    background: 0,\n    border: 0,\n    color: 'rgba(255, 255, 255, 0.75)',\n    cursor: 'pointer',\n    display: 'inline-flex ',\n    height: 44,\n    justifyContent: 'center',\n    outline: 0,\n    padding: 0,\n    position: 'relative',\n    width: 44,\n    '&:hover': {\n      color: 'white'\n    }\n  };\n};\nvar headerFullscreenCSS = headerButtonCSS;\nvar HeaderFullscreen = function HeaderFullscreen(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return glam(Button, _extends({\n    css: getStyles('headerFullscreen', props),\n    className: className(['header_button', 'header_button--fullscreen']),\n    type: \"button\"\n  }, innerProps), children);\n};\nvar headerCloseCSS = headerButtonCSS;\nvar HeaderClose = function HeaderClose(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return glam(Button, _extends({\n    css: getStyles('headerClose', props),\n    className: className(['header_button', 'header_button--close']),\n    type: \"button\"\n  }, innerProps), children);\n};\n\n// Navigation\n// ==============================\n\nvar navigationCSS = function navigationCSS(_ref) {\n  var interactionIsIdle = _ref.interactionIsIdle;\n  return {\n    display: 'flex ',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    opacity: interactionIsIdle ? 0 : 1,\n    transition: 'opacity 300ms'\n  };\n};\nvar Navigation = function Navigation(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal;\n  return !isTouch() ? glam(Nav, {\n    css: getStyles('navigation', props),\n    className: className('navigation', {\n      isFullscreen: isFullscreen,\n      isModal: isModal\n    })\n  }, children) : null;\n}; // ==============================\n// Nav Item\n// ==============================\n\nvar BUTTON_SIZE = 50;\nvar navigationItemCSS = function navigationItemCSS(_ref2) {\n  var _ref3;\n\n  var align = _ref2.align;\n  return _ref3 = {\n    alignItems: 'center',\n    background: 'rgba(255, 255, 255, 0.2)',\n    border: 0,\n    borderRadius: '50%',\n    color: 'white',\n    cursor: 'pointer',\n    display: 'flex ',\n    fontSize: 'inherit',\n    height: BUTTON_SIZE,\n    justifyContent: 'center',\n    marginTop: -(BUTTON_SIZE / 2),\n    outline: 0,\n    position: 'absolute',\n    top: '50%',\n    transition: 'background-color 200ms',\n    width: BUTTON_SIZE\n  }, _defineProperty(_ref3, align, 20), _defineProperty(_ref3, '&:hover', {\n    background: 'rgba(255, 255, 255, 0.3)'\n  }), _defineProperty(_ref3, '&:active', {\n    background: 'rgba(255, 255, 255, 0.2)'\n  }), _ref3;\n};\nvar navigationPrevCSS = navigationItemCSS;\nvar NavigationPrev = function NavigationPrev(props) {\n  var _props$children = props.children,\n      children = _props$children === void 0 ? glam(ChevronLeft, {\n    size: 48\n  }) : _props$children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return glam(Button, _extends({\n    type: \"button\",\n    css: getStyles('navigationPrev', props)\n  }, innerProps), children);\n};\nvar navigationNextCSS = navigationItemCSS;\nvar NavigationNext = function NavigationNext(props) {\n  var _props$children2 = props.children,\n      children = _props$children2 === void 0 ? glam(ChevronRight, {\n    size: 48\n  }) : _props$children2,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return glam(Button, _extends({\n    type: \"button\",\n    css: getStyles('navigationNext', props)\n  }, innerProps), children);\n};\n\n// Blanket\n// ==============================\n\nvar blanketCSS = function blanketCSS(_ref) {\n  var isFullscreen = _ref.isFullscreen;\n  return {\n    backgroundColor: isFullscreen ? 'black' : 'rgba(0, 0, 0, 0.8)',\n    bottom: 0,\n    left: 0,\n    position: 'fixed',\n    right: 0,\n    top: 0,\n    zIndex: 1\n  };\n};\nvar Blanket = function Blanket(props) {\n  var getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen;\n  return glam(Div, _extends({\n    css: getStyles('blanket', props),\n    className: className('blanket', {\n      isFullscreen: isFullscreen\n    })\n  }, innerProps));\n}; // ==============================\n// Positioner\n// ==============================\n\nvar positionerCSS = function positionerCSS() {\n  return {\n    alignItems: 'center',\n    bottom: 0,\n    display: 'flex ',\n    justifyContent: 'center',\n    left: 0,\n    position: 'fixed',\n    right: 0,\n    top: 0,\n    zIndex: 1\n  };\n};\nvar Positioner = function Positioner(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen;\n  return glam(Div, _extends({\n    css: getStyles('positioner', props),\n    className: className('positioner', {\n      isFullscreen: isFullscreen\n    })\n  }, innerProps), children);\n}; // ==============================\n// Dialog\n// ==============================\n\nvar dialogCSS = function dialogCSS() {\n  return {\n    width: '100%'\n  };\n};\nvar Dialog = function Dialog(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen;\n  return glam(Div, _extends({\n    css: getStyles('dialog', props),\n    className: className('dialog', {\n      isFullscreen: isFullscreen\n    })\n  }, innerProps), children);\n};\n\nfunction getSource(_ref) {\n  var data = _ref.data,\n      isFullscreen = _ref.isFullscreen;\n  var _data$source = data.source,\n      source = _data$source === void 0 ? data.src : _data$source;\n  if (typeof source === 'string') return source;\n  return isFullscreen ? source.fullscreen : source.regular;\n}\n\nvar viewCSS = function viewCSS() {\n  return {\n    lineHeight: 0,\n    position: 'relative',\n    textAlign: 'center'\n  };\n};\n\nvar View = function View(props) {\n  var data = props.data,\n      formatters = props.formatters,\n      getStyles = props.getStyles,\n      index = props.index,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal;\n  var innerProps = {\n    alt: formatters.getAltText({\n      data: data,\n      index: index\n    }),\n    src: getSource({\n      data: data,\n      isFullscreen: isFullscreen\n    })\n  };\n  return glam(Div, {\n    css: getStyles('view', props),\n    className: className('view', {\n      isFullscreen: isFullscreen,\n      isModal: isModal\n    })\n  }, glam(Img, _extends({}, innerProps, {\n    className: className('view-image', {\n      isFullscreen: isFullscreen,\n      isModal: isModal\n    }),\n    css: {\n      height: 'auto',\n      maxHeight: '100vh',\n      maxWidth: '100vw',\n      userSelect: 'none'\n    }\n  })));\n};\n\nvar carouselComponents = {\n  Container: Container,\n  Footer: Footer,\n  FooterCaption: FooterCaption,\n  FooterCount: FooterCount,\n  Header: Header,\n  HeaderClose: HeaderClose,\n  HeaderFullscreen: HeaderFullscreen,\n  Navigation: Navigation,\n  NavigationPrev: NavigationPrev,\n  NavigationNext: NavigationNext,\n  View: View\n};\nvar defaultCarouselComponents = function defaultCarouselComponents(providedComponents) {\n  return _objectSpread2({}, carouselComponents, {}, providedComponents);\n}; // ==============================\n// Modal\n// ==============================\n\nvar modalComponents = {\n  Blanket: Blanket,\n  Positioner: Positioner,\n  Dialog: Dialog\n};\nvar defaultModalComponents = function defaultModalComponents(providedComponents) {\n  return _objectSpread2({}, modalComponents, {}, providedComponents);\n};\n\nvar defaultCarouselStyles = {\n  container: containerCSS,\n  footer: footerCSS,\n  footerCaption: footerCaptionCSS,\n  footerCount: footerCountCSS,\n  header: headerCSS,\n  headerClose: headerCloseCSS,\n  headerFullscreen: headerFullscreenCSS,\n  navigation: navigationCSS,\n  navigationPrev: navigationPrevCSS,\n  navigationNext: navigationNextCSS,\n  view: viewCSS\n};\nvar defaultModalStyles = {\n  blanket: blanketCSS,\n  dialog: dialogCSS,\n  positioner: positionerCSS\n}; // Merge Utility\n\n// NOTE: props aren't used by default for some getters but consumers may need\n// them, this needs to be reflected in the flow type.\n\n/* eslint-disable no-unused-vars */\n// ==============================\n// Navigation\n// ==============================\n\n/* ARIA label for the next button */\nfunction getNextLabel(_ref) {\n  var currentIndex = _ref.currentIndex,\n      views = _ref.views;\n  return \"Show slide \".concat(currentIndex + 2, \" of \").concat(views.length);\n}\n/* ARIA label for the previous button */\n\n\nfunction getPrevLabel(_ref2) {\n  var currentIndex = _ref2.currentIndex,\n      views = _ref2.views;\n  return \"Show slide \".concat(currentIndex, \" of \").concat(views.length);\n}\n/* HTML title for the next button */\n\n\nfunction getNextTitle(props) {\n  return 'Next (right arrow)';\n}\n/* HTML title for the previous button */\n\n\nfunction getPrevTitle(props) {\n  return 'Previous (left arrow)';\n} // ==============================\n// Header\n// ==============================\n\n\n/* ARIA label for the close button */\nfunction getCloseLabel(props) {\n  return 'Close (esc)';\n}\n/* ARIA label for the fullscreen button */\n\n\nfunction getFullscreenLabel(_ref3) {\n  var isFullscreen = _ref3.isFullscreen;\n  return isFullscreen ? 'Exit fullscreen (f)' : 'Enter fullscreen (f)';\n} // ==============================\n// View\n// ==============================\n\n/* alt text for each image in the carousel */\n\n\nfunction getAltText(_ref4) {\n  var data = _ref4.data,\n      index = _ref4.index;\n  if (data.caption) return data.caption;\n  return \"Image \".concat(index + 1);\n} // ==============================\n// Exports\n// ==============================\n\n\nvar formatters = {\n  getAltText: getAltText,\n  getNextLabel: getNextLabel,\n  getPrevLabel: getPrevLabel,\n  getNextTitle: getNextTitle,\n  getPrevTitle: getPrevTitle,\n  getCloseLabel: getCloseLabel,\n  getFullscreenLabel: getFullscreenLabel\n};\n\nvar viewPagerStyles = {\n  flex: '1 1 auto',\n  position: 'relative'\n};\nvar frameStyles = {\n  outline: 0\n};\nvar defaultProps = {\n  currentIndex: 0,\n  formatters: formatters,\n  hideControlsWhenIdle: 3000,\n  styles: {},\n  trackProps: {\n    instant: !isTouch(),\n    swipe: 'touch'\n  }\n};\n\nvar Carousel =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Carousel, _Component);\n\n  // TODO\n  function Carousel(props) {\n    var _this;\n\n    _classCallCheck(this, Carousel);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Carousel).call(this, props));\n\n    _initialiseProps.call(_assertThisInitialized(_this));\n\n    _this.cacheComponents(props.components);\n\n    _this.state = {\n      currentIndex: props.currentIndex,\n      interactionIsIdle: isTouch()\n    };\n    return _this;\n  }\n\n  _createClass(Carousel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          hideControlsWhenIdle = _this$props.hideControlsWhenIdle,\n          modalProps = _this$props.modalProps;\n      var isModal = Boolean(modalProps);\n      this.mounted = true;\n\n      if (hideControlsWhenIdle && this.container) {\n        this.container.addEventListener('mousedown', this.handleMouseActivity);\n        this.container.addEventListener('mousemove', this.handleMouseActivity);\n        this.container.addEventListener('touchmove', this.handleMouseActivity);\n      }\n\n      if (isModal) {\n        this.focusViewFrame();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.components !== this.props.components) {\n        this.cacheComponents(prevProps.components);\n      }\n\n      if (this.props.currentIndex !== prevProps.currentIndex) {\n        this.setState({\n          currentIndex: prevProps.currentIndex\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.mounted = false;\n\n      if (this.props.hideControlsWhenIdle && this.container) {\n        this.container.removeEventListener('mousedown', this.handleMouseActivity);\n        this.container.removeEventListener('mousemove', this.handleMouseActivity);\n        this.container.removeEventListener('touchmove', this.handleMouseActivity);\n        this.handleMouseActivity.cancel();\n      }\n    }\n  }, {\n    key: \"getCommonProps\",\n    value: function getCommonProps() {\n      var _this$props2 = this.props,\n          frameProps = _this$props2.frameProps,\n          trackProps = _this$props2.trackProps,\n          modalProps = _this$props2.modalProps,\n          views = _this$props2.views;\n      var isModal = Boolean(modalProps);\n      var isFullscreen = Boolean(modalProps && modalProps.isFullscreen);\n      var _this$state = this.state,\n          currentIndex = _this$state.currentIndex,\n          interactionIsIdle = _this$state.interactionIsIdle;\n      var currentView = this.getViewData();\n      return {\n        carouselProps: this.props,\n        currentIndex: currentIndex,\n        currentView: currentView,\n        formatters: this.props.formatters,\n        frameProps: frameProps,\n        getStyles: this.getStyles,\n        isFullscreen: isFullscreen,\n        isModal: isModal,\n        modalProps: modalProps,\n        interactionIsIdle: interactionIsIdle,\n        trackProps: trackProps,\n        views: views\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$components = this.components,\n          Container = _this$components.Container,\n          View = _this$components.View;\n      var currentIndex = this.state.currentIndex;\n      var _this$props3 = this.props,\n          frameProps = _this$props3.frameProps,\n          views = _this$props3.views;\n      var commonProps = this.commonProps = this.getCommonProps();\n      return glam(Container, _extends({}, commonProps, {\n        innerProps: {\n          innerRef: this.getContainer\n        }\n      }), this.renderHeader(), glam(ViewPager, {\n        tag: \"main\",\n        style: viewPagerStyles,\n        className: className('pager')\n      }, glam(Frame, _extends({}, frameProps, {\n        ref: this.getFrame,\n        className: className('frame'),\n        style: frameStyles\n      }), glam(Track, _extends({}, this.getTrackProps(this.props), {\n        style: {\n          display: 'flex',\n          alignItems: 'center'\n        },\n        currentView: currentIndex,\n        className: className('track'),\n        onViewChange: this.handleViewChange,\n        ref: this.getTrack\n      }), views && views.map(function (data, index) {\n        return glam(View$1, {\n          className: className('view-wrapper'),\n          key: index\n        }, glam(View, _extends({}, commonProps, {\n          data: data,\n          index: index\n        })));\n      }))), this.renderNavigation()), this.renderFooter());\n    }\n  }]);\n\n  return Carousel;\n}(Component);\n\nCarousel.defaultProps = defaultProps;\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.mounted = false;\n\n  this.cacheComponents = function (comps) {\n    _this2.components = defaultCarouselComponents(comps);\n  };\n\n  this.getContainer = function (ref) {\n    _this2.container = ref;\n  };\n\n  this.getFooter = function (ref) {\n    _this2.footer = ref;\n  };\n\n  this.getFrame = function (ref) {\n    _this2.frame = findDOMNode(ref);\n  };\n\n  this.getHeader = function (ref) {\n    _this2.header = ref;\n  };\n\n  this.getTrack = function (ref) {\n    _this2.track = ref;\n  };\n\n  this.hasPreviousView = function () {\n    var trackProps = _this2.props.trackProps;\n    var currentIndex = _this2.state.currentIndex;\n    return trackProps.infinite || currentIndex !== 0;\n  };\n\n  this.hasNextView = function () {\n    var _this2$props = _this2.props,\n        trackProps = _this2$props.trackProps,\n        views = _this2$props.views;\n    var currentIndex = _this2.state.currentIndex;\n    return trackProps.infinite || currentIndex !== views.length - 1;\n  };\n\n  this.getStyles = function (key, props) {\n    var base = defaultCarouselStyles[key](props);\n    base.boxSizing = 'border-box';\n    var custom = _this2.props.styles[key];\n    return custom ? custom(base, props) : base;\n  };\n\n  this.getTrackProps = function (props) {\n    return _objectSpread2({}, defaultProps.trackProps, {}, props.trackProps);\n  };\n\n  this.getFormatters = function () {\n    return _objectSpread2({}, defaultProps.formatters, {}, _this2.props.formatters);\n  };\n\n  this.getViewData = function () {\n    var views = _this2.props.views;\n    var currentIndex = _this2.state.currentIndex;\n    return views[currentIndex];\n  };\n\n  this.focusViewFrame = function () {\n    if (_this2.frame && document.activeElement !== _this2.frame) {\n      _this2.frame.focus();\n    }\n  };\n\n  this.prev = function () {\n    _this2.track.prev();\n\n    _this2.focusViewFrame();\n  };\n\n  this.next = function () {\n    _this2.track.next();\n\n    _this2.focusViewFrame();\n  };\n\n  this.handleMouseActivity = rafScheduler(function () {\n    clearTimeout(_this2.timer);\n\n    if (_this2.state.interactionIsIdle) {\n      _this2.setState({\n        interactionIsIdle: false\n      });\n    }\n\n    _this2.timer = setTimeout(function () {\n      if (_this2.mounted) {\n        _this2.setState({\n          interactionIsIdle: true\n        });\n      }\n    }, _this2.props.hideControlsWhenIdle);\n  });\n\n  this.handleViewChange = function (indicies) {\n    var trackProps = _this2.props.trackProps; // simplify by enforcing number\n\n    var currentIndex = indicies[0];\n\n    _this2.setState({\n      currentIndex: currentIndex\n    }); // call the consumer's onViewChange fn\n\n\n    if (trackProps && trackProps.onViewChange) {\n      trackProps.onViewChange(currentIndex);\n    }\n  };\n\n  this.renderNavigation = function () {\n    var _this2$getFormatters = _this2.getFormatters(),\n        getNextLabel = _this2$getFormatters.getNextLabel,\n        getPrevLabel = _this2$getFormatters.getPrevLabel,\n        getNextTitle = _this2$getFormatters.getNextTitle,\n        getPrevTitle = _this2$getFormatters.getPrevTitle;\n\n    var _this2$components = _this2.components,\n        Navigation = _this2$components.Navigation,\n        NavigationPrev = _this2$components.NavigationPrev,\n        NavigationNext = _this2$components.NavigationNext;\n    var commonProps = _this2.commonProps;\n\n    var showPrev = _this2.hasPreviousView();\n\n    var showNext = _this2.hasNextView();\n\n    var showNav = (showPrev || showNext) && Navigation;\n    return showNav ? glam(Navigation, commonProps, showPrev && glam(NavigationPrev, _extends({}, commonProps, {\n      align: \"left\",\n      innerProps: {\n        'aria-label': getPrevLabel(commonProps),\n        onClick: _this2.prev,\n        title: getPrevTitle(commonProps)\n      }\n    })), showNext && glam(NavigationNext, _extends({}, commonProps, {\n      align: \"right\",\n      innerProps: {\n        'aria-label': getNextLabel(commonProps),\n        onClick: _this2.next,\n        title: getNextTitle(commonProps)\n      }\n    }))) : null;\n  };\n\n  this.renderFooter = function () {\n    var _this2$components2 = _this2.components,\n        Footer = _this2$components2.Footer,\n        FooterCaption = _this2$components2.FooterCaption,\n        FooterCount = _this2$components2.FooterCount;\n    var commonProps = _this2.commonProps;\n    return Footer ? glam(Footer, _extends({}, commonProps, {\n      components: {\n        Caption: FooterCaption,\n        Count: FooterCount\n      },\n      innerProps: {\n        innerRef: _this2.getFooter\n      }\n    })) : null;\n  };\n\n  this.renderHeader = function () {\n    var _this2$components3 = _this2.components,\n        Header = _this2$components3.Header,\n        HeaderClose = _this2$components3.HeaderClose,\n        HeaderFullscreen = _this2$components3.HeaderFullscreen;\n\n    var _this2$getFormatters2 = _this2.getFormatters(),\n        getCloseLabel = _this2$getFormatters2.getCloseLabel,\n        getFullscreenLabel = _this2$getFormatters2.getFullscreenLabel;\n\n    var commonProps = _this2.commonProps;\n    return Header ? glam(Header, _extends({}, commonProps, {\n      getCloseLabel: getCloseLabel,\n      getFullscreenLabel: getFullscreenLabel,\n      components: {\n        CloseButton: HeaderClose,\n        FullscreenButton: HeaderFullscreen\n      },\n      data: _this2.getViewData(),\n      innerProps: {\n        innerRef: _this2.getHeader\n      }\n    })) : null;\n  };\n};\n\nvar FirstChild = function FirstChild(_ref) {\n  var children = _ref.children;\n  return Children.toArray(children)[0] || null;\n};\n\nvar ModalGateway =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ModalGateway, _Component);\n\n  function ModalGateway() {\n    _classCallCheck(this, ModalGateway);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ModalGateway).apply(this, arguments));\n  }\n\n  _createClass(ModalGateway, [{\n    key: \"render\",\n    value: function render() {\n      if (typeof window === 'undefined') return null;\n      var _this$props = this.props,\n          target = _this$props.target,\n          children = _this$props.children;\n      return createPortal(React.createElement(TransitionGroup, {\n        component: FirstChild,\n        children: children\n      }), target);\n    }\n  }]);\n\n  return ModalGateway;\n}(Component);\n\nModalGateway.defaultProps = {\n  target: typeof window !== 'undefined' ? document.body : null\n};\n\nvar easing = 'cubic-bezier(0.23, 1, 0.32, 1)'; // easeOutQuint\n\nvar verticalOffset = 40;\n// ==============================\n// Fade\n// ==============================\nvar Fade = function Fade(_ref) {\n  var Tag = _ref.component,\n      onEntered = _ref.onEntered,\n      onExited = _ref.onExited,\n      inProp = _ref[\"in\"],\n      originalProps = _ref.innerProps,\n      props = _objectWithoutProperties(_ref, [\"component\", \"onEntered\", \"onExited\", \"in\", \"innerProps\"]);\n\n  var enter = 300;\n  var exit = 500;\n  var fadeStyle = {\n    transition: 'opacity 200ms',\n    opacity: 0\n  };\n  var fadeTransition = {\n    entering: {\n      opacity: 0\n    },\n    entered: {\n      opacity: 1\n    },\n    exiting: {\n      opacity: 0,\n      transitionDuration: \"\".concat(exit, \"ms\")\n    }\n  };\n  return React.createElement(Transition, {\n    appear: true,\n    mountOnEnter: true,\n    unmountOnExit: true,\n    onEntered: onEntered,\n    onExited: onExited,\n    key: \"fade\",\n    \"in\": inProp,\n    timeout: {\n      enter: enter,\n      exit: exit\n    }\n  }, function (status) {\n    var innerProps = _objectSpread2({}, originalProps, {\n      style: _objectSpread2({}, fadeStyle, {}, fadeTransition[status])\n    });\n\n    if (status === 'exited') return null;\n    return React.createElement(Tag, _extends({\n      innerProps: innerProps\n    }, props));\n  });\n}; // ==============================\n// Slide Up\n// ==============================\n\nvar SlideUp = function SlideUp(_ref2) {\n  var Tag = _ref2.component,\n      onEntered = _ref2.onEntered,\n      onExited = _ref2.onExited,\n      inProp = _ref2[\"in\"],\n      originalProps = _ref2.innerProps,\n      props = _objectWithoutProperties(_ref2, [\"component\", \"onEntered\", \"onExited\", \"in\", \"innerProps\"]);\n\n  var enter = 300;\n  var exit = 500;\n  var restingTransform = 'translate3d(0, 0, 0)';\n  var slideStyle = {\n    transition: \"transform \".concat(enter, \"ms \").concat(easing, \", opacity \").concat(enter, \"ms \").concat(easing),\n    transform: restingTransform\n  };\n  var slideTransition = {\n    entering: {\n      opacity: 0,\n      transform: \"translate3d(0, \".concat(verticalOffset, \"px, 0) scale(0.9)\")\n    },\n    entered: {\n      opacity: 1,\n      transform: restingTransform\n    },\n    exiting: {\n      opacity: 0,\n      transform: \"translate3d(0, \".concat(verticalOffset, \"px, 0) scale(0.9)\"),\n      transition: \"transform \".concat(exit, \"ms \").concat(easing, \", opacity \").concat(exit, \"ms \").concat(easing)\n    }\n  };\n  return React.createElement(Transition, {\n    appear: true,\n    \"in\": inProp,\n    mountOnEnter: true,\n    onEntered: onEntered,\n    onExited: onExited,\n    timeout: {\n      enter: enter,\n      exit: exit\n    },\n    unmountOnExit: true\n  }, function (status) {\n    if (status === 'exited') return null;\n\n    var innerProps = _objectSpread2({}, originalProps, {\n      style: _objectSpread2({}, slideStyle, {}, slideTransition[status])\n    });\n\n    return React.createElement(Tag, _extends({\n      innerProps: innerProps\n    }, props));\n  });\n};\n\nvar defaultProps$1 = {\n  allowFullscreen: !isTouch(),\n  closeOnBackdropClick: true,\n  closeOnEsc: true,\n  styles: {}\n};\n\nvar Modal =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Modal, _Component);\n\n  // TODO\n  function Modal(props) {\n    var _this;\n\n    _classCallCheck(this, Modal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Modal).call(this, props));\n\n    _initialiseProps$1.call(_assertThisInitialized(_this));\n\n    _this.cacheComponents(props.components);\n\n    _this.state = {\n      isFullscreen: false\n    };\n    return _this;\n  }\n\n  _createClass(Modal, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.components !== this.props.components) {\n        this.cacheComponents(prevProps.components);\n      }\n    } // emulate `componentDidMount` & `componentWillUnmount`\n    // called on complete of enter & exit transitions respectively\n\n  }, {\n    key: \"getCommonProps\",\n    value: function getCommonProps() {\n      var isFullscreen = this.state.isFullscreen;\n      return {\n        getStyles: this.getStyles,\n        isFullscreen: isFullscreen,\n        modalProps: this.props\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$components = this.components,\n          Blanket = _this$components.Blanket,\n          Positioner = _this$components.Positioner,\n          Dialog = _this$components.Dialog;\n      var _this$props = this.props,\n          allowFullscreen = _this$props.allowFullscreen,\n          children = _this$props.children;\n      var isFullscreen = this.state.isFullscreen;\n      var commonProps = this.commonProps = this.getCommonProps(); // $FlowFixMe\n\n      var transitionIn = this.props[\"in\"]; // forward props to modal for use in internal components\n\n      var modalProps = {\n        allowFullscreen: allowFullscreen,\n        isFullscreen: isFullscreen,\n        onClose: this.handleClose,\n        toggleFullscreen: this.toggleFullscreen\n      }; // augment user carousel with modal props\n      // $FlowFixMe\n\n      var carouselComponent = cloneElement(children, {\n        isModal: true,\n        modalProps: modalProps\n      });\n      return glam(Fullscreen, {\n        enabled: isFullscreen,\n        onChange: this.handleFullscreenChange\n      }, glam(Fade, _extends({}, commonProps, {\n        component: Blanket,\n        \"in\": transitionIn\n      })), glam(SlideUp, _extends({}, commonProps, {\n        component: Positioner,\n        \"in\": transitionIn,\n        innerProps: {\n          onClick: this.handleBackdropClick\n        },\n        onEntered: this.modalDidMount,\n        onExited: this.modalWillUnmount\n      }), glam(Dialog, commonProps, carouselComponent), glam(ScrollLock, null)));\n    }\n  }]);\n\n  return Modal;\n}(Component);\n\nModal.defaultProps = defaultProps$1;\n\nvar _initialiseProps$1 = function _initialiseProps() {\n  var _this2 = this;\n\n  this.modalDidMount = function () {\n    document.addEventListener('keyup', _this2.handleKeyUp);\n    focusStore.storeFocus();\n  };\n\n  this.modalWillUnmount = function () {\n    document.removeEventListener('keyup', _this2.handleKeyUp);\n    focusStore.restoreFocus();\n  };\n\n  this.cacheComponents = function (comps) {\n    _this2.components = defaultModalComponents(comps);\n  };\n\n  this.handleFullscreenChange = function (isFullscreen) {\n    _this2.setState({\n      isFullscreen: isFullscreen\n    });\n  };\n\n  this.handleKeyUp = function (event) {\n    var _this2$props = _this2.props,\n        allowFullscreen = _this2$props.allowFullscreen,\n        closeOnEsc = _this2$props.closeOnEsc;\n    var isFullscreen = _this2.state.isFullscreen;\n    var allowClose = event.key === 'Escape' && closeOnEsc && !isFullscreen; // toggle fullscreen\n\n    if (allowFullscreen && event.key === 'f') {\n      _this2.toggleFullscreen();\n    } // close on escape when not fullscreen\n\n\n    if (allowClose) _this2.handleClose(event);\n  };\n\n  this.handleBackdropClick = function (event) {\n    var closeOnBackdropClick = _this2.props.closeOnBackdropClick;\n    if (!event.target.classList.contains(className('view')) || !closeOnBackdropClick) return;\n\n    _this2.handleClose(event);\n  };\n\n  this.toggleFullscreen = function () {\n    _this2.setState(function (state) {\n      return {\n        isFullscreen: !state.isFullscreen\n      };\n    });\n  };\n\n  this.handleClose = function (event) {\n    var onClose = _this2.props.onClose;\n    var isFullscreen = _this2.state.isFullscreen; // force exit fullscreen mode on close\n\n    if (isFullscreen) {\n      _this2.toggleFullscreen();\n    } // call the consumer's onClose func\n\n\n    onClose(event);\n  };\n\n  this.getStyles = function (key, props) {\n    var base = defaultModalStyles[key](props);\n    base.boxSizing = 'border-box';\n    var custom = _this2.props.styles[key];\n    return custom ? custom(base, props) : base;\n  };\n};\n\nexport default Carousel;\nexport { Modal, ModalGateway, carouselComponents, modalComponents };\n"]},"metadata":{},"sourceType":"module"}