{"ast":null,"code":"var _jsxFileName = \"/Users/mathewmozaffari/Desktop/Current Clients/AGM Basements/src/speer/agm_basements/src/Containers/Braintree.js\";\nimport React from \"react\";\nimport DropIn from \"braintree-web-drop-in-react\";\n\nclass Braintree extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      clientToken: null\n    };\n  }\n\n  async componentDidMount() {\n    try {\n      // Get a client token for authorization from your server\n      const response = await fetch(\"api/braintree/getToken\");\n      const res = await response.json(); // If returned as JSON string\n\n      if (res.clientToken) {\n        this.setState({\n          clientToken: res.clientToken\n        });\n      } else {\n        alert('Something went wrong. Please try again after some time. > ' + res.name);\n      }\n    } catch (e) {\n      alert('Something went wrong. Please try again after some time.');\n    }\n  }\n\n  async buy() {\n    // Send the nonce to your server\n    const _ref = await this.instance.requestPaymentMethod(),\n          nonce = _ref.nonce;\n\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"paymentMethodNonce\": nonce\n      })\n    };\n    const response = await fetch(`api/braintree/purchase`, requestOptions);\n    const res = await response.json(); // If returned as JSON string\n\n    if (res.success === false) {\n      alert('Something went wrong >' + res.message);\n    }\n  }\n\n  render() {\n    if (!this.state.clientToken) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, \"Loading...\"));\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(DropIn, {\n        options: {\n          authorization: this.state.clientToken\n        },\n        onInstance: instance => this.instance = instance,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.buy.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, \"Buy\"));\n    }\n  }\n\n}\n\nexport default Braintree;","map":{"version":3,"sources":["/Users/mathewmozaffari/Desktop/Current Clients/AGM Basements/src/speer/agm_basements/src/Containers/Braintree.js"],"names":["React","DropIn","Braintree","Component","state","clientToken","componentDidMount","response","fetch","res","json","setState","alert","name","e","buy","instance","requestPaymentMethod","nonce","requestOptions","method","headers","body","JSON","stringify","success","message","render","authorization","bind"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,6BAAnB;;AAEA,MAAMC,SAAN,SAAwBF,KAAK,CAACG,SAA9B,CAAwC;AAAA;AAAA;AAAA,SAGpCC,KAHoC,GAG5B;AACJC,MAAAA,WAAW,EAAE;AADT,KAH4B;AAAA;;AAOpC,QAAMC,iBAAN,GAA0B;AACtB,QAAI;AACA;AACA,YAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,wBAAD,CAA5B;AACA,YAAMC,GAAG,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAAlB,CAHA,CAGmC;;AAEnC,UAAGD,GAAG,CAACJ,WAAP,EAAmB;AACf,aAAKM,QAAL,CAAc;AACVN,UAAAA,WAAW,EAAEI,GAAG,CAACJ;AADP,SAAd;AAGH,OAJD,MAIO;AACHO,QAAAA,KAAK,CAAC,+DAA6DH,GAAG,CAACI,IAAlE,CAAL;AACH;AACJ,KAZD,CAYE,OAAMC,CAAN,EAAS;AACPF,MAAAA,KAAK,CAAC,yDAAD,CAAL;AACH;AACJ;;AAED,QAAMG,GAAN,GAAY;AACR;AADQ,iBAEU,MAAM,KAAKC,QAAL,CAAcC,oBAAd,EAFhB;AAAA,UAEAC,KAFA,QAEAA,KAFA;;AAIR,UAAMC,cAAc,GAAG;AACnBC,MAAAA,MAAM,EAAE,MADW;AAEnBC,MAAAA,OAAO,EAAE;AACL,kBAAU,kBADL;AAEL,wBAAgB;AAFX,OAFU;AAMnBC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAC,8BAAsBN;AAAvB,OAAf;AANa,KAAvB;AAQA,UAAMX,QAAQ,GAAG,MAAMC,KAAK,CAAE,wBAAF,EAA2BW,cAA3B,CAA5B;AACA,UAAMV,GAAG,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAAlB,CAbQ,CAa2B;;AAEnC,QAAGD,GAAG,CAACgB,OAAJ,KAAgB,KAAnB,EAAyB;AACrBb,MAAAA,KAAK,CAAC,2BAA2BH,GAAG,CAACiB,OAAhC,CAAL;AACH;AACJ;;AAEDC,EAAAA,MAAM,GAAG;AACL,QAAI,CAAC,KAAKvB,KAAL,CAAWC,WAAhB,EAA6B;AACzB,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,CADJ;AAKH,KAND,MAMO;AACH,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,MAAD;AACI,QAAA,OAAO,EAAE;AAAEuB,UAAAA,aAAa,EAAE,KAAKxB,KAAL,CAAWC;AAA5B,SADb;AAEI,QAAA,UAAU,EAAEW,QAAQ,IAAK,KAAKA,QAAL,GAAgBA,QAF7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAKI;AAAQ,QAAA,OAAO,EAAE,KAAKD,GAAL,CAASc,IAAT,CAAc,IAAd,CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eALJ,CADJ;AASH;AACJ;;AA/DmC;;AAiExC,eAAe3B,SAAf","sourcesContent":["import React from \"react\";\nimport DropIn from \"braintree-web-drop-in-react\";\n\nclass Braintree extends React.Component {\n    instance;\n\n    state = {\n        clientToken: null\n    };\n\n    async componentDidMount() {\n        try {\n            // Get a client token for authorization from your server\n            const response = await fetch(\"api/braintree/getToken\");\n            const res = await response.json(); // If returned as JSON string\n\n            if(res.clientToken){\n                this.setState({\n                    clientToken: res.clientToken\n                });\n            } else {\n                alert('Something went wrong. Please try again after some time. > '+res.name);\n            }\n        } catch(e) {\n            alert('Something went wrong. Please try again after some time.');\n        }\n    }\n\n    async buy() {\n        // Send the nonce to your server\n        const { nonce } = await this.instance.requestPaymentMethod();\n\n        const requestOptions = {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n              },\n            body: JSON.stringify({\"paymentMethodNonce\": nonce})\n        };\n        const response = await fetch(`api/braintree/purchase`, requestOptions);\n        const res = await response.json(); // If returned as JSON string\n\n        if(res.success === false){\n            alert('Something went wrong >' + res.message);\n        }\n    }\n\n    render() {\n        if (!this.state.clientToken) {\n            return (\n                <div>\n                    <h1>Loading...</h1>\n                </div>\n            );\n        } else {\n            return (\n                <div>\n                    <DropIn\n                        options={{ authorization: this.state.clientToken }}\n                        onInstance={instance => (this.instance = instance)}\n                    />\n                    <button onClick={this.buy.bind(this)}>Buy</button>\n                </div>\n            );\n        }\n    }\n}\nexport default Braintree;"]},"metadata":{},"sourceType":"module"}